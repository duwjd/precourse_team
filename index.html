<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개발팀 소개</title>
    <link rel="stylesheet" href="style.css">
    <!-- Bootstrap 및 기타 CSS 링크 포함 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <style>
        /* 기존 스타일들 */
        body {
            font-family: Arial, sans-serif;
            background-color: #b4d8e7;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        }

        .hero {
            background-color: #343a40;
            color: #ffffff;
            text-align: center;
            padding: 50px 0;
            margin-bottom: 30px;
        }

        .description-box {
            background-color: #f5f5f5;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        /* Rest of your custom styles */

        .guestbook-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        .comment-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .comment-author {
            color: #007bff;
            /* Blue color for author's name */
        }

        .comment-date {
            color: #6c757d;
            /* Gray color for date */
        }

        .comment-content {
            margin-bottom: 10px;
        }

        .comment-actions button {
            margin-right: 5px;
            padding: 0;
            font-size: 12px;
            color: #007bff;
            /* Blue color for action buttons */
            text-decoration: underline;
            background: none;
            border: none;
            cursor: pointer;
        }

        .comment-actions button:hover {
            color: #0056b3;
            /* Darker blue color on hover */
        }
        /* Additional styles for improved separation and sophistication */

/* Styling for post header */
.post-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 5px 10px;
    background-color: #f5f5f5;
    border-radius: 5px;
}

.post-subject,
.post-author,
.post-date {
    margin: 0;
}

/* Styling for guestbook item */
.guestbook-item {
    border: 1px solid #ccc;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    background-color: #ffffff;
}

/* Styling for comment item */
.comment-item {
    border: 1px solid #e0e0e0;
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
    background-color: #f9f9f9;
}
.comment-item .comment-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
}
.comment-author {
    font-weight: bold;
    color: #007bff;
}
.comment-date {
    color: #6c757d;
}

.comment-content {
    margin-bottom: 5px;
}

.comment-actions button {
    font-size: 12px;
    color: #007bff;
    text-decoration: underline;
    background: none;
    border: none;
    cursor: pointer;
}
.comment-actions button:hover {
    color: #0056b3;
}

    </style>
</head>

<body>
    <div class="container">
        <!-- Hero 섹션 -->
        <div class="hero">
            <h1>안녕하세요! 저를 소개합니다.</h1>
            <img src="your_image_url_here.jpg" alt="My Photo" style="max-width: 100%;">
        </div>
        <!-- Description 섹션 -->
        <div class="description-box">
            <h2>저에 대한 설명과 이미지</h2>
            <p>
                여기에 저에 대한 설명을 추가하세요. 본인에 대한 정보를 잘 나타낼 수 있는 내용을 작성해주세요.
            </p>
            <!-- 추가 내용 및 이미지를 여기에 추가할 수 있습니다. -->
        </div>
        <div class="container">
            <!-- 나머지 내용 -->
            <!-- 방명록 작성 폼 박스 -->
            <div class="section_wrap guestbook-form">
                <h2 class="sectiontitle">방명록에 글 남기기</h2>
                <form id="guestbookForm">
                    <!-- 작성자 정보 입력 -->
                    <div class="mb-3">
                        <label for="postNickname" class="form-label">닉네임</label>
                        <input type="text" class="form-control" id="postNickname" name="postNickname" required>
                    </div>
                    <div class="mb-3">
                        <label for="postPassword" class="form-label">비밀번호</label>
                        <input type="password" class="form-control" id="postPassword" name="postPassword" required>
                    </div>
                    <!-- 글 작성 내용 입력 -->
                    <div class="mb-3">
                        <label for="postContent" class="form-label">글 내용</label>
                        <textarea class="form-control" id="postContent" name="postContent" rows="3" required></textarea>
                    </div>
                    <!-- 이미지 업로드 -->
                    <div class="mb-3">
                        <label for="postImage" class="form-label">이미지 업로드</label>
                        <input type="file" class="form-control" id="postImage" name="postImage">
                    </div>
                    <!-- 글 제목 입력 -->
                    <div class="mb-3">
                        <label for="postTitle" class="form-label">제목</label>
                        <input type="text" class="form-control" id="postTitle" name="postTitle" required>
                    </div>
                    <!-- 글 등록 버튼 -->
                    <button type="submit" class="btn btn-primary">글 남기기</button>
                </form>
            </div>

            <!-- 방명록 게시물 박스 -->
            <div class="section_wrap guestbook-box">
                <h2 class="sectiontitle">방명록</h2>
                <div id="guestbookPosts" class="row">
                    <!-- 방명록 글이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>
        

        <!-- 모달 및 JS 스크립트 -->
        <!-- Bootstrap 및 기타 JS 스크립트 링크 포함 -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>

        <script>
            // 방명록 게시물을 저장할 배열을 초기화합니다.
            const guestbookPosts = [];

            // INTP 모달 표시를 위한 이벤트 리스너
            function showINTPModal() {
                $('#intpModal').modal('show');
            }

            // 마우스 이동에 반응하여 반짝이 효과를 추가하는 이벤트 리스너
            document.addEventListener("DOMContentLoaded", function () {
                const container = document.querySelector(".container");

                container.addEventListener("mousemove", function (event) {
                    const sparkle = document.createElement("div");
                    sparkle.className = "sparkle";
                    sparkle.style.left = (event.clientX + 5) + "px";
                    sparkle.style.top = (event.clientY + 5) + "px";
                    container.appendChild(sparkle);

                    setTimeout(() => {
                        container.removeChild(sparkle);
                    }, 1000);
                });
            });

            // 방명록 폼 제출 이벤트 리스너
            document.getElementById("guestbookForm").addEventListener("submit", function (event) {
                event.preventDefault();

                // 폼 입력값 가져오기
                const nickname = document.getElementById("postNickname").value;
                const password = document.getElementById("postPassword").value;
                const title = document.getElementById("postTitle").value;
                const content = document.getElementById("postContent").value;

                // 파일 입력 요소와 선택한 파일 가져오기
                const fileInput = document.getElementById("postImage");
                const imageFile = fileInput.files[0]; // 첫 번째 선택된 파일 가져오기

                // 방명록 게시물 객체 생성
                const post = {
                    date: new Date().toLocaleString(), // 현재 날짜와 시간
                    nickname: nickname,
                    password: password,
                    title: title,
                    content: content,
                    image: imageFile ? URL.createObjectURL(imageFile) : null,
                    comments: []
                };

                // 게시물을 방명록 게시물 배열에 추가
                guestbookPosts.push(post);

                // 폼 입력값 초기화
                document.getElementById("guestbookForm").reset();

                // 게시물 배열을 로컬 스토리지에 저장
                localStorage.setItem("guestbookPosts", JSON.stringify(guestbookPosts));

                // 방명록 게시물 표시
                displayGuestbookPosts();
            });

            // 방명록 게시물을 표시하는 함수
            function displayGuestbookPosts() {
    const guestbookPostsDiv = document.getElementById("guestbookPosts");
    guestbookPostsDiv.innerHTML = ""; // Clear existing posts

    guestbookPosts.forEach((post, postIndex) => {
        const postHTML = `
            <div class="col-md-12 mb-4">
                <div class="guestbook-item">
                    <div class="post-header">
                        <div class="post-info">
                            <div class="post-subject">제목: ${post.title}</div>
                            <div class="post-author">작성자: ${post.nickname}</div>
                            <div class="post-date">날짜: ${post.date}</div>
                        </div>
                    </div>
                    <p class="post-content">${post.content}</p>
                    ${post.image ? `<img src="${post.image}" alt="방명록 이미지" class="img-fluid">` : ''}
                    <div class="d-flex justify-content-between mt-3">
                        <div>
                            <button class="btn btn-link" data-bs-toggle="collapse" data-bs-target="#commentCollapse${postIndex}" aria-expanded="false">
                                댓글 보기
                            </button>
                            <button class="btn btn-link" onclick="editPost(${postIndex})">수정</button>
                            <button class="btn btn-link" onclick="deletePost(${postIndex})">삭제</button>
                        </div>
                        <div>${post.comments.length} 댓글</div>
                    </div>
                    <div class="collapse mt-3" id="commentCollapse${postIndex}">
                        <!-- 댓글 내용 -->
                        ${post.comments.map((comment, commentIndex) => `
                            <div class="comment-item">
                                <div class="comment-header">
                                    <div class="comment-author">${comment.nickname}</div>
                                    <div class="comment-date">${comment.date}</div>
                                </div>
                                <div class="comment-content">${comment.comment}</div>
                                <div class="comment-actions">
                                    <button class="btn btn-link" onclick="editComment(${postIndex}, ${commentIndex})">수정</button>
                                    <button class="btn btn-link" onclick="deleteComment(${postIndex}, ${commentIndex})">삭제</button>
                                </div>
                            </div>
                        `).join('')}
                        <!-- 댓글 입력 폼 -->
                        <div class="mt-2">
                            <input type="text" class="form-control" id="commentNicknameInput${postIndex}" placeholder="닉네임">
                            <input type="password" class="form-control" id="commentPasswordInput${postIndex}" placeholder="비밀번호">
                            <input type="text" class="form-control" id="commentInput${postIndex}" placeholder="댓글 작성">
                            <button class="btn btn-primary btn-sm mt-2" onclick="addComment(${postIndex})">댓글 추가</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        guestbookPostsDiv.innerHTML += postHTML;
    });
}
            // 댓글 추가 함수
            function addComment(postIndex) {
    const commentNicknameInput = document.getElementById(`commentNicknameInput${postIndex}`);
    const commentPasswordInput = document.getElementById(`commentPasswordInput${postIndex}`);
    const commentInput = document.getElementById(`commentInput${postIndex}`);
    
    const nickname = commentNicknameInput.value;
    const password = commentPasswordInput.value;
    const commentContent = commentInput.value;

    if (nickname && password && commentContent) {
        const commentDate = new Date().toLocaleString(); // Current date and time
        const newComment = {
            nickname: nickname,
            password: password,
            comment: commentContent,
            date: commentDate
        };

        guestbookPosts[postIndex].comments.push(newComment);

        commentNicknameInput.value = '';
        commentPasswordInput.value = '';
        commentInput.value = '';
        displayGuestbookPosts();
    }
}

            // Function to edit a comment
            function editComment(postIndex, commentIndex) {
                const commentPassword = prompt("댓글을 수정하려면 비밀번호를 입력하세요:");
                if (commentPassword !== null && commentPassword === guestbookPosts[postIndex].comments[commentIndex].password) {
                    const updatedComment = prompt("수정할 내용을 입력하세요:", guestbookPosts[postIndex].comments[commentIndex].comment);
                    if (updatedComment !== null) {
                        guestbookPosts[postIndex].comments[commentIndex].comment = updatedComment;
                        displayGuestbookPosts();
                    }
                } else {
                    alert("비밀번호가 일치하지 않습니다. 댓글을 수정할 수 없습니다.");
                }
            }

            // 게시물 수정 함수
            function editPost(postIndex) {
                // 비밀번호 확인
                const password = prompt("게시물을 수정하려면 비밀번호를 입력하세요:");
                if (password !== null && password === guestbookPosts[postIndex].password) {
                    // 수정할 내용 입력
                    const updatedContent = prompt("수정할 내용을 입력하세요:", guestbookPosts[postIndex].content);
                    if (updatedContent !== null) {
                        guestbookPosts[postIndex].content = updatedContent;
                        displayGuestbookPosts();
                    }
                } else {
                    alert("비밀번호가 일치하지 않습니다. 게시물을 수정할 수 없습니다.");
                }
            }

            // 게시물 삭제 함수
            function deletePost(postIndex) {
                // 비밀번호 확인
                const password = prompt("게시물을 삭제하려면 비밀번호를 입력하세요:");
                if (password !== null && password === guestbookPosts[postIndex].password) {
                    // 선택한 게시물 삭제
                    guestbookPosts.splice(postIndex, 1);
                    displayGuestbookPosts();
                } else {
                    alert("비밀번호가 일치하지 않습니다. 게시물을 삭제할 수 없습니다.");
                }
            }

            // 댓글 삭제 함수
            function deleteComment(postIndex, commentIndex) {
                // 비밀번호 확인
                const password = prompt("댓글을 삭제하려면 비밀번호를 입력하세요:");
                if (password !== null && password === guestbookPosts[postIndex].password) {
                    // 선택한 댓글 삭제
                    guestbookPosts[postIndex].comments.splice(commentIndex, 1);
                    displayGuestbookPosts();
                } else {
                    alert("비밀번호가 일치하지 않습니다. 댓글을 삭제할 수 없습니다.");
                }
            }

            // 페이지 로드 시 방명록 게시물 초기화
            displayGuestbookPosts();
        </script>
</body>

</html>